# Qt摄像头控制应用

一个基于Qt 6和DirectShow的摄像头控制应用程序，提供了摄像头预览、参数调节和格式设置功能。代码完全由cursor生成

## 功能特点

- 自动检测系统中的摄像头设备
- 支持选择不同的视频格式（YUY2、MJPEG）
- 根据所选视频格式显示相应支持的分辨率
- 支持选择不同的分辨率和帧率
- 实时显示摄像头预览和帧率信息
- 提供图像处理控制（亮度、对比度、饱和度等）
- 支持摄像机参数控制（曝光、对焦、变焦等）


## 系统要求

- Windows操作系统
- Qt 6.7.2或更高版本
- MinGW 64位编译器
- CMake 3.5或更高版本

## 项目结构

```
├── src/                    # 源代码目录
│   ├── main.cpp            # 程序入口
│   ├── cam_qt.cpp          # 主窗口实现
│   ├── cam_qt.h            # 主窗口头文件
│   ├── cam_qt.ui           # 主窗口UI定义
│   ├── CameraControlDialog.cpp  # 摄像头控制对话框实现
│   ├── CameraControlDialog.h    # 摄像头控制对话框头文件
│   ├── CameraDeviceInfo.h       # 摄像头设备信息定义
│   ├── CameraUtils.cpp          # 摄像头工具函数实现
│   ├── CameraUtils.h            # 摄像头工具函数头文件
│   ├── dbgout.cpp               # 调试输出实现
│   └── dbgout.h                 # 调试输出头文件
├── build/                  # 构建目录
├── CMakeLists.txt          # CMake构建配置
├── run_qt_project.bat      # 一键编译运行批处理
├── compile_qt_file.bat     # 单文件编译批处理
└── README.md               # 项目说明文档
```

## 编译和运行

### 使用批处理文件（推荐）

1. 确保已安装Qt 6.7.2和MinGW 64位编译器
2. 双击运行`run_qt_project.bat`批处理文件
3. 批处理将自动创建build目录、配置CMake、编译并运行程序

### 使用CMake手动编译

1. 创建build目录：
   ```
   mkdir build
   cd build
   ```

2. 配置CMake：
   ```
   cmake .. -G "MinGW Makefiles"
   ```

3. 编译项目：
   ```
   mingw32-make
   ```

4. 运行程序：
   ```
   .\qt_camera_control.exe
   ```

## 使用说明

1. 启动程序后，点击"查找摄像头"按钮检测系统中的摄像头设备
2. 从下拉列表中选择要使用的摄像头
3. 选择视频格式（YUY2或MJPEG）
4. 从下拉列表中选择该格式支持的分辨率
5. 选择所需的帧率
6. 点击"打开摄像头"按钮开始预览
7. 点击"设置格式"按钮应用选择的格式、分辨率和帧率
8. 点击"图像控制"按钮打开摄像头参数调节对话框
   - "图像处理"选项卡可调节亮度、对比度、饱和度等参数
   - "摄像机控制"选项卡可调节曝光、对焦、变焦等参数
9. 调整参数后点击"应用"按钮使设置生效
10. 点击"关闭摄像头"停止预览并释放摄像头资源

## 技术细节

- 使用Qt 6多媒体模块进行摄像头访问和视频预览
- 使用DirectShow API进行摄像头参数控制

## 许可证

本项目采用MIT许可证。详见LICENSE文件。
